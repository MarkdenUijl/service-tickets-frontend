<script setup>
    import { useDark, useToggle } from '@vueuse/core';
    import { motion } from 'motion-v';
    
    const moonPath = "M18.8417 3.26636C18.7159 2.91121 18.2137 2.91121 18.0878 3.26636L17.6565 4.48356C17.6162 4.59724 17.5268 4.68667 17.4131 4.72695L16.1959 5.15825C15.8408 5.28409 15.8408 5.78633 16.1959 5.91217L17.4131 6.34347C17.5268 6.38375 17.6162 6.47318 17.6565 6.58686L18.0878 7.80406C18.2137 8.1592 18.7159 8.1592 18.8417 7.80406L19.273 6.58686C19.3133 6.47318 19.4028 6.38375 19.5164 6.34347L20.7336 5.91217C21.0888 5.78633 21.0888 5.28409 20.7336 5.15825L19.5164 4.72695C19.4028 4.68667 19.3133 4.59724 19.273 4.48356L18.8417 3.26636Z M14.148 7.24033C14.235 6.995 14.5819 6.995 14.6689 7.24033L14.9066 7.9112C14.9344 7.98973 14.9962 8.05151 15.0747 8.07934L15.7456 8.31705C15.9909 8.40398 15.9909 8.75094 15.7456 8.83787L15.0747 9.07558C14.9962 9.1034 14.9344 9.16518 14.9066 9.24371L14.6689 9.91458C14.5819 10.1599 14.235 10.1599 14.148 9.91458L13.9103 9.24371C13.8825 9.16518 13.8207 9.1034 13.7422 9.07558L13.0713 8.83787C12.826 8.75094 12.826 8.40398 13.0713 8.31705L13.7422 8.07934C13.8207 8.05151 13.8825 7.98973 13.9103 7.9112L14.148 7.24033Z M16.7701 10.2212C16.828 10.0577 17.0593 10.0577 17.1173 10.2212L17.2757 10.6685C17.2943 10.7208 17.3355 10.762 17.3878 10.7806L17.8351 10.9391C17.9986 10.997 17.9986 11.2283 17.8351 11.2863L17.3878 11.4447C17.3355 11.4633 17.2943 11.5045 17.2757 11.5568L17.1173 12.0041C17.0593 12.1676 16.828 12.1676 16.7701 12.0041L16.6116 11.5568C16.593 11.5045 16.5518 11.4633 16.4995 11.4447L16.0522 11.2863C15.8887 11.2283 15.8887 10.997 16.0522 10.9391L16.4995 10.7806C16.5518 10.762 16.593 10.7208 16.6116 10.6685L16.7701 10.2212Z M11.1347 4.65082C11.2895 4.92163 11.2632 5.25949 11.0684 5.50312C10.2511 6.52542 9.76722 7.80518 9.76722 9.19444C9.76722 12.5078 12.5377 15.2308 16.0014 15.2308C16.9528 15.2308 17.852 15.0249 18.656 14.6579C18.9386 14.529 19.2712 14.5848 19.4962 14.7989C19.7212 15.013 19.7933 15.3425 19.6785 15.6311C18.4249 18.7812 15.2868 21 11.6297 21C6.88437 21 3 17.2564 3 12.5929C3 8.35107 6.21566 4.86876 10.3667 4.27529C10.6755 4.23114 10.9799 4.38 11.1347 4.65082Z";
    const sunPath = "M11.75 5.5C11.1977 5.5 10.75 5.05228 10.75 4.5V2C10.75 1.44772 11.1977 1 11.75 1H12.25C12.8023 1 13.25 1.44772 13.25 2V4.5C13.25 5.05228 12.8023 5.5 12.25 5.5H11.75Z M16.4194 7.22698C16.0289 6.83646 16.0289 6.20329 16.4194 5.81277L18.1872 4.045C18.5777 3.65447 19.2109 3.65447 19.6014 4.045L19.9549 4.39855C20.3455 4.78908 20.3455 5.42224 19.9549 5.81277L18.1872 7.58053C17.7967 7.97106 17.1635 7.97106 16.773 7.58053L16.4194 7.22698Z M18.5 11.75C18.5 11.1977 18.9477 10.75 19.5 10.75H22C22.5523 10.75 23 11.1977 23 11.75V12.25C23 12.8023 22.5523 13.25 22 13.25H19.5C18.9477 13.25 18.5 12.8023 18.5 12.25V11.75Z M16.7728 16.4194C17.1633 16.0289 17.7965 16.0289 18.187 16.4194L19.9548 18.1872C20.3453 18.5777 20.3453 19.2109 19.9548 19.6014L19.6012 19.9549C19.2107 20.3455 18.5775 20.3455 18.187 19.9549L16.4192 18.1872C16.0287 17.7967 16.0287 17.1635 16.4192 16.773L16.7728 16.4194Z M12.25 18.5C12.8023 18.5 13.25 18.9477 13.25 19.5V22C13.25 22.5523 12.8023 23 12.25 23H11.75C11.1977 23 10.75 22.5523 10.75 22V19.5C10.75 18.9477 11.1977 18.5 11.75 18.5H12.25Z M7.58059 16.773C7.97111 17.1635 7.97111 17.7967 7.58059 18.1872L5.81282 19.955C5.4223 20.3455 4.78913 20.3455 4.39861 19.955L4.04505 19.6014C3.65453 19.2109 3.65453 18.5778 4.04505 18.1872L5.81282 16.4195C6.20334 16.0289 6.83651 16.0289 7.22703 16.4195L7.58059 16.773Z M5.5 12.25C5.5 12.8023 5.05228 13.25 4.5 13.25H2C1.44772 13.25 1 12.8023 1 12.25V11.75C1 11.1977 1.44772 10.75 2 10.75H4.5C5.05228 10.75 5.5 11.1977 5.5 11.75V12.25Z M7.22722 7.58059C6.8367 7.97111 6.20353 7.97111 5.81301 7.58059L4.04524 5.81282C3.65472 5.4223 3.65472 4.78913 4.04524 4.39861L4.3988 4.04505C4.78932 3.65453 5.42248 3.65453 5.81301 4.04505L7.58078 5.81282C7.9713 6.20334 7.9713 6.83651 7.58078 7.22703L7.22722 7.58059Z M7 12C7 9.23858 9.23858 7 12 7C14.7614 7 17 9.23858 17 12C17 14.7614 14.7614 17 12 17C9.23858 17 7 14.7614 7 12Z";

    const isDark = useDark({
        selector: "body",
        attribute: "color-scheme",
        valueDark: "dark",
        valueLight: "light",
        storageKey: "vueuse-color-scheme",
        initialValue: "auto",
    });

    const ToggleDark = useToggle();

</script>

<template>

    <div class="theme-toggle-container" color-scheme=" isDark ? 'light' : 'dark' ">
        <label :class="['theme-toggler', isDark ? 'end' : 'start']">
            <input type="checkbox" v-model="isDark">
            <div class="toggle-track"></div>
            <motion.div
                :data-state="isDark"
                class="toggle-handle"
                layout
                :transition="{
                    type: 'spring',
                    visualDuration: 0.4,
                    bounce: 0.2,
                }"
            >
                <svg width="14" height="14" fill="var(--color-text)" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                    <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                    <g id="SVGRepo_iconCarrier">
                        <path :d="isDark ? moonPath : sunPath"></path>
                    </g>
                </svg>
            </motion.div>
        </label>
    </div>
    
</template>


<style>
    .theme-toggle-container {
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .theme-toggler input {
        opacity: 0;
        width: 0;
        height: 0;
    }

    [color-scheme= 'dark'] {
        --color-background: var(--vt-c-black);
        --color-text: var(--vt-c-white);
    }

    [color-scheme= 'light'] {
        --color-background: var(--vt-c-white);
        --color-text: var(--vt-c-black);
    } 

    .theme-toggler {
        width: 40px;
        height: 20px;
        border-radius: 20px;
        cursor: pointer;
        position: relative;
        display: flex;
        align-items: center;
    }

    .theme-toggler.start {
        justify-content: flex-start;
    }

    .theme-toggler.end {
        justify-content: flex-end;
    }

    .toggle-track {
        z-index: 0;
        position: absolute;
        margin: 2px;
        width: 36px;
        height: 16px;
        border-radius: 8px;
        border: var(--color-text) 1px solid;
    }

    .toggle-handle {
        z-index: 1;
        width: 20px;
        height: 20px;
        border: var(--color-text) 1px solid;
        background-color: var(--color-background);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
    }
</style>
